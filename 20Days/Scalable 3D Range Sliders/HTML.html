<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Get User Media Code Along!</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Scalableb <b>3D</b> Range Sliders</h1>

<main class="perspective" id="first-bar">
    <section class="bar">
        <div class="bar-face back percentage"></div>
        <div class="bar-face floor percentage"></div>
        <div class="bar-face roof percentage"></div>
        <div class="bar-face front percentage"></div>
    </section>
    <input type="range" min="0" max="101" class="bar-input" value="64">
</main>
<p>Simple Range</p>


<main class="perspective" id="second-bar">
    <section class="bar">
        <div class="bar-face back percentage"></div>
        <div class="bar-face floor percentage"></div>
        <div class="bar-face roof percentage"></div>
        <div class="bar-face front percentage"></div>
    </section>
    <input type="range" min="0" max="101" class="bar-input" value="37">
</main>
<p>Patterned Range</p>

<main class="perspective" id="third-bar">
    <section class="bar">
        <div class="bar-face back percentage"></div>
        <div class="bar-face floor percentage"></div>
        <div class="bar-face roof percentage"></div>
        <div class="bar-face front percentage"></div>
        <div class="indicator">89%</div>
    </section>
    <input type="range" min="0" max="101" class="bar-input" value="89">
</main>
<p class="third-bar-p">Gradient Range with Indicator</p>


<script>

    function initInputs() {
        var allInputs = document.body.querySelectorAll(".bar-input");

        for (var i = 0; i < allInputs.length; i++) {
            var input = allInputs[i];
            var barId = input.parentNode.id;
            var styleEl = document.head.appendChild(document.createElement("style"));

            if (i == allInputs.length -1) {
                var indicator = input.parentNode.querySelector('.bar .indicator');
                setBarIndicator(barId, input, styleEl, indicator);
                input.oninput = setBarIndicator.bind(this, barId, input, styleEl, indicator);
                input.onchange = setBarIndicator.bind(this, barId, input, styleEl, indicator);
            } else {
                setBar(barId, input, styleEl);
                input.oninput = setBar.bind(this, barId, input, styleEl);
                input.onchange = setBar.bind(this, barId, input, styleEl);
            }
        }
    }

    function setBar(barId, input, styleEl){
        styleEl.innerHTML = "#" + barId + ".bar-face.percentage:before {width:" + input.value + "%;}";
    }
    function setBarIndicator(barId, input, styleEl, indicatorEl){
        styleEl.innerHTML = "#" + barId + ".bar-face.percentage:before {width:" +
            input.value + "%;}";
        indicatorEl.textContent = input.value +'%';
    }

    initInputs();

</script>
</body>
</html>